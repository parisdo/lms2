"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var student_1 = require("../../models/student");
var level_1 = require("../../models/level");
var forms_1 = require("@angular/forms");
var router_1 = require("@angular/router");
var course_service_1 = require("../../services/course.service");
var add_course_1 = require("../../models/add_course");
var Tab = (function () {
    function Tab(id, name) {
        this.id = id;
        this.name = name;
    }
    return Tab;
}());
exports.Tab = Tab;
var AddCourseComponent = (function () {
    function AddCourseComponent(formBuilder, router, courseService) {
        this.formBuilder = formBuilder;
        this.router = router;
        this.courseService = courseService;
        this.tabIndex = 1;
        this.tabName = '';
        this.tabProgress = [
            new Tab(1, 'เพิ่มชั้นเรียน'),
            new Tab(2, 'เพิ่มนักเรียน'),
            new Tab(3, 'เพิ่มรูปนักเรียน'),
            new Tab(4, 'กำหนดค่าเริ่มต้น')
        ];
        this.popupMessage = {
            "title": "เพิ่มวิชาเรียบเรียบร้อย",
            "message": ""
        };
        this.check = 'excel';
        this.students = [];
        this.editStudentMode = false;
        this.image = '';
        this.resizeOptions = {
            resizeMaxHeight: 150,
            resizeMaxWidth: 150
        };
        this.levels = [];
        this.current_level = 0;
        this.current_levelEnd = 0;
        this.createCourseForm();
        this.createStudentsForm();
        this.createXpForm();
        this.createLevelsForm();
    }
    AddCourseComponent.prototype.ngOnInit = function () {
        this.tabName = this.getTabName().name;
    };
    AddCourseComponent.prototype.next = function () {
        this.tabIndex == 4 ? this.tabIndex = 4 : this.tabIndex++;
        this.tabName = this.getTabName().name;
    };
    AddCourseComponent.prototype.getTabName = function () {
        var _this = this;
        return this.tabProgress.find(function (index) { return index.id == _this.tabIndex; });
    };
    AddCourseComponent.prototype.previous = function () {
        this.tabIndex == 1 ? this.tabIndex = 1 : this.tabIndex--;
        this.tabName = this.getTabName().name;
    };
    AddCourseComponent.prototype.createCourseForm = function () {
        this.courseForm = this.formBuilder.group({
            'name': ['', [forms_1.Validators.required]],
            'description': ['', [forms_1.Validators.required]]
        });
    };
    AddCourseComponent.prototype.createStudentsForm = function () {
        this.studentsForm = this.formBuilder.group({
            'student_id': ['', [forms_1.Validators.required]],
            'student_title': ['mr'],
            'student_name': ['', [forms_1.Validators.required]]
        });
    };
    AddCourseComponent.prototype.onCheck = function (check) {
        this.check = check;
    };
    AddCourseComponent.prototype.addStudent = function (student) {
        var fakeImage = (student.student_title == 'mr' || student.student_title == 'boy' ?
            "data:image/jpeg;base64,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" :
            "data:image/jpeg;base64,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");
        var newStudent = new student_1.Student(student.student_id, student.student_title, student.student_name, fakeImage);
        this.students.push(newStudent);
        this.createStudentsForm();
    };
    AddCourseComponent.prototype.editStudent = function (index) {
        console.log(index);
        this.selectedIndex = index;
        this.editStudentMode = !this.editStudentMode;
    };
    AddCourseComponent.prototype.deleteStudent = function (student) {
        _.remove(this.students, student);
    };
    AddCourseComponent.prototype.selected = function (imageResult, student) {
        this.students[this.students.indexOf(student)].image = imageResult.resized
            && imageResult.resized.dataURL
            || imageResult.dataURL;
    };
    AddCourseComponent.prototype.createXpForm = function () {
        this.xpForm = this.formBuilder.group({
            'start_xp': ['1', [forms_1.Validators.required]],
            'leader_board': ['10', [forms_1.Validators.required]]
        });
    };
    AddCourseComponent.prototype.createLevelsForm = function () {
        this.levelsForm = this.formBuilder.group({
            'floor_xp': ['', [forms_1.Validators.required]],
            'ceiling_xp': ['', [forms_1.Validators.required]]
        });
    };
    AddCourseComponent.prototype.addLevel = function (level) {
        if (level.ceiling_xp > level.floor_xp) {
            if (this.current_level == 0) {
                this.newLevel(level);
            }
            else {
                if (level.floor_xp > this.current_levelEnd) {
                    level.floor_xp = (+this.current_levelEnd + 1);
                    this.newLevel(level);
                }
            }
        }
    };
    AddCourseComponent.prototype.newLevel = function (level) {
        var newLevel = new level_1.Level(++this.current_level, level.floor_xp, level.ceiling_xp);
        this.levels.push(newLevel);
        this.current_levelEnd = level.ceiling_xp;
    };
    AddCourseComponent.prototype.deleteLevel = function (level) {
        this.current_level -= 1;
        this.current_levelEnd = level.floor_xp - 1;
        _.remove(this.levels, level);
    };
    AddCourseComponent.prototype.submit = function () {
        var _this = this;
        if (this.levels.length == 0) {
            var level = new level_1.Level('1', '1', 10);
            this.levels.push(level);
        }
        var studentLevel;
        this.levels.forEach(function (level) {
            if (_.inRange(_this.xpForm.value.start_xp, level.floor_xp, level.ceiling_xp)) {
                studentLevel = level;
            }
        });
        this.students.forEach(function (student) {
            student.level = studentLevel.level_id;
            student.overall_xp = _this.xpForm.value.start_xp;
        });
        var newCourse = new add_course_1.AddCourse(this.courseForm.value.name, this.courseForm.value.description, this.xpForm.value.start_xp, this.xpForm.value.leader_board, this.levels, this.students);
        this.courseService.createNewCourse(newCourse)
            .subscribe(function (data) {
            console.log(data);
            console.log(data.status);
            _this.router.navigate(['/teach']);
        }, function (error) { return console.log(error); });
    };
    AddCourseComponent.prototype.cancel = function () {
        window.history.back();
    };
    AddCourseComponent = __decorate([
        core_1.Component({
            moduleId: module.id,
            selector: 'app-add-course',
            templateUrl: 'add-course.component.html',
            styleUrls: ['add-course.component.css']
        }), 
        __metadata('design:paramtypes', [forms_1.FormBuilder, router_1.Router, course_service_1.CourseService])
    ], AddCourseComponent);
    return AddCourseComponent;
}());
exports.AddCourseComponent = AddCourseComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC90ZWFjaC9hZGQtY291cnNlL2FkZC1jb3Vyc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxQkFBMEIsZUFBZSxDQUFDLENBQUE7QUFDMUMsd0JBQXNCLHNCQUFzQixDQUFDLENBQUE7QUFDN0Msc0JBQW9CLG9CQUFvQixDQUFDLENBQUE7QUFDekMsc0JBQXNDLGdCQUFnQixDQUFDLENBQUE7QUFFdkQsdUJBQXFCLGlCQUFpQixDQUFDLENBQUE7QUFHdkMsK0JBQTRCLCtCQUErQixDQUFDLENBQUE7QUFDNUQsMkJBQXdCLHlCQUF5QixDQUFDLENBQUE7QUFFbEQ7SUFDSSxhQUFtQixFQUFVLEVBQVMsSUFBWTtRQUEvQixPQUFFLEdBQUYsRUFBRSxDQUFRO1FBQVMsU0FBSSxHQUFKLElBQUksQ0FBUTtJQUFFLENBQUM7SUFDekQsVUFBQztBQUFELENBRkEsQUFFQyxJQUFBO0FBRlksV0FBRyxNQUVmLENBQUE7QUFTRDtJQVdJLDRCQUFvQixXQUF3QixFQUFVLE1BQWMsRUFBVSxhQUE0QjtRQUF0RixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVE7UUFBVSxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQVQxRyxhQUFRLEdBQVcsQ0FBQyxDQUFDO1FBQ3JCLFlBQU8sR0FBVyxFQUFFLENBQUM7UUFDckIsZ0JBQVcsR0FBRztZQUNWLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQztZQUM1QixJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZUFBZSxDQUFDO1lBQzNCLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRSxrQkFBa0IsQ0FBQztZQUM5QixJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUUsa0JBQWtCLENBQUM7U0FDakMsQ0FBQztRQTRCRixpQkFBWSxHQUFRO1lBQ2hCLE9BQU8sRUFBRSx5QkFBeUI7WUFDbEMsU0FBUyxFQUFFLEVBQUU7U0FDaEIsQ0FBQztRQXVCRixVQUFLLEdBQVcsT0FBTyxDQUFDO1FBTXhCLGFBQVEsR0FBYyxFQUFFLENBQUM7UUFDekIsb0JBQWUsR0FBWSxLQUFLLENBQUM7UUFzQmpDLFVBQUssR0FBVyxFQUFFLENBQUM7UUFDbkIsa0JBQWEsR0FBa0I7WUFDM0IsZUFBZSxFQUFFLEdBQUc7WUFDcEIsY0FBYyxFQUFFLEdBQUc7U0FDdEIsQ0FBQztRQTBCRixXQUFNLEdBQVksRUFBRSxDQUFDO1FBRXJCLGtCQUFhLEdBQVcsQ0FBQyxDQUFDO1FBQzFCLHFCQUFnQixHQUFXLENBQUMsQ0FBQztRQWpIekIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFHRCxxQ0FBUSxHQUFSO1FBQ0ksSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDO0lBQzFDLENBQUM7SUFFRCxpQ0FBSSxHQUFKO1FBQ0ksSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLEdBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEdBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3pELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQztJQUMxQyxDQUFDO0lBRUQsdUNBQVUsR0FBVjtRQUFBLGlCQUVDO1FBREcsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQUEsS0FBSyxJQUFJLE9BQUEsS0FBSyxDQUFDLEVBQUUsSUFBSSxLQUFJLENBQUMsUUFBUSxFQUF6QixDQUF5QixDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVELHFDQUFRLEdBQVI7UUFDSSxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsR0FBSSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsR0FBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekQsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDO0lBQzFDLENBQUM7SUFVRCw2Q0FBZ0IsR0FBaEI7UUFDSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO1lBQ3JDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDbkMsYUFBYSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUM3QyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBSUQsK0NBQWtCLEdBQWxCO1FBQ0ksSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQztZQUN2QyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLGVBQWUsRUFBRSxDQUFDLElBQUksQ0FBQztZQUN2QixjQUFjLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQzlDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFLRCxvQ0FBTyxHQUFQLFVBQVEsS0FBYTtRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDO0lBS0QsdUNBQVUsR0FBVixVQUFXLE9BQVk7UUFFbkIsSUFBSSxTQUFTLEdBQUcsQ0FBQyxPQUFPLENBQUMsYUFBYSxJQUFJLElBQUksSUFBSSxPQUFPLENBQUMsYUFBYSxJQUFJLEtBQUs7WUFDNUUsNjFLQUE2MUs7WUFDNzFLLHkvS0FBeS9LLENBQUMsQ0FBQztRQUMvL0ssSUFBSSxVQUFVLEdBQVksSUFBSSxpQkFBTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ2xILElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFFRCx3Q0FBVyxHQUFYLFVBQVksS0FBVTtRQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBQzNCLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO0lBQy9DLENBQUM7SUFFRCwwQ0FBYSxHQUFiLFVBQWMsT0FBWTtRQUN0QixDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDcEMsQ0FBQztJQVFELHFDQUFRLEdBQVIsVUFBUyxXQUF3QixFQUFFLE9BQVk7UUFFM0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsT0FBTztlQUNsRSxXQUFXLENBQUMsT0FBTyxDQUFDLE9BQU87ZUFDM0IsV0FBVyxDQUFDLE9BQU8sQ0FBQztJQUMvQixDQUFDO0lBSUQseUNBQVksR0FBWjtRQUNJLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUM7WUFDakMsVUFBVSxFQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsa0JBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxQyxjQUFjLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxrQkFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ2hELENBQUMsQ0FBQztJQUNQLENBQUM7SUFHRCw2Q0FBZ0IsR0FBaEI7UUFDSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO1lBQ3JDLFVBQVUsRUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDekMsWUFBWSxFQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNoRCxDQUFDLENBQUM7SUFDUCxDQUFDO0lBT0QscUNBQVEsR0FBUixVQUFTLEtBQVU7UUFFZixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQSxDQUFDO1lBR2xDLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxDQUFDLENBQUEsQ0FBQztnQkFDeEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixDQUFDO1lBQUEsSUFBSSxDQUFDLENBQUM7Z0JBRUgsRUFBRSxDQUFBLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQSxDQUFDO29CQUV2QyxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQzlDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3pCLENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQztJQUNMLENBQUM7SUFFRCxxQ0FBUSxHQUFSLFVBQVMsS0FBVTtRQUNmLElBQUksUUFBUSxHQUFHLElBQUksYUFBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztJQUM3QyxDQUFDO0lBRUQsd0NBQVcsR0FBWCxVQUFZLEtBQVU7UUFFbEIsSUFBSSxDQUFDLGFBQWEsSUFBSSxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO1FBQzNDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUNoQyxDQUFDO0lBSUQsbUNBQU0sR0FBTjtRQUFBLGlCQXlDQztRQXZDQyxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQSxDQUFDO1lBQzFCLElBQUksS0FBSyxHQUFHLElBQUksYUFBSyxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxDQUFDLENBQUM7WUFDbEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDekIsQ0FBQztRQUdDLElBQUksWUFBaUIsQ0FBQztRQUV0QixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFDLEtBQUs7WUFDdEIsRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFFLENBQUMsQ0FBQSxDQUFDO2dCQUN6RSxZQUFZLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUMsT0FBTztZQUMxQixPQUFPLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUM7WUFDdEMsT0FBTyxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDcEQsQ0FBQyxDQUFDLENBQUM7UUFHSCxJQUFJLFNBQVMsR0FBRyxJQUFJLHNCQUFTLENBQ3JCLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLElBQUksRUFDMUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQzFCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksRUFDOUIsSUFBSSxDQUFDLE1BQU0sRUFDWCxJQUFJLENBQUMsUUFBUSxDQUNwQixDQUFDO1FBR0YsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDO2FBQ3hDLFNBQVMsQ0FDTixVQUFDLElBQVM7WUFDTixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3pCLEtBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNyQyxDQUFDLEVBQ0QsVUFBQyxLQUFLLElBQUssT0FBQSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFsQixDQUFrQixDQUNoQyxDQUFDO0lBQ1YsQ0FBQztJQUVELG1DQUFNLEdBQU47UUFDSSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFwTkw7UUFBQyxnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1lBQ25CLFFBQVEsRUFBRSxnQkFBZ0I7WUFDeEIsV0FBVyxFQUFFLDJCQUEyQjtZQUN4QyxTQUFTLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQztTQUMxQyxDQUFDOzswQkFBQTtJQWtORix5QkFBQztBQUFELENBaE5BLEFBZ05DLElBQUE7QUFoTlksMEJBQWtCLHFCQWdOOUIsQ0FBQSIsImZpbGUiOiJhcHAvdGVhY2gvYWRkLWNvdXJzZS9hZGQtY291cnNlLmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtTdHVkZW50fSBmcm9tIFwiLi4vLi4vbW9kZWxzL3N0dWRlbnRcIjtcbmltcG9ydCB7TGV2ZWx9IGZyb20gXCIuLi8uLi9tb2RlbHMvbGV2ZWxcIjtcbmltcG9ydCB7Rm9ybUJ1aWxkZXIsIFZhbGlkYXRvcnN9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHtJbWFnZVJlc3VsdCwgUmVzaXplT3B0aW9uc30gZnJvbSBcIm5nMi1pbWFnZXVwbG9hZFwiO1xuaW1wb3J0IHtSb3V0ZXJ9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcblxuZGVjbGFyZSB2YXIgXyA6IGFueTtcbmltcG9ydCB7Q291cnNlU2VydmljZX0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2NvdXJzZS5zZXJ2aWNlXCI7XG5pbXBvcnQge0FkZENvdXJzZX0gZnJvbSBcIi4uLy4uL21vZGVscy9hZGRfY291cnNlXCI7XG5cbmV4cG9ydCBjbGFzcyBUYWJ7XG4gICAgY29uc3RydWN0b3IocHVibGljIGlkOiBudW1iZXIsIHB1YmxpYyBuYW1lOiBzdHJpbmcpe31cbn1cblxuQENvbXBvbmVudCh7XG4gIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gIHNlbGVjdG9yOiAnYXBwLWFkZC1jb3Vyc2UnLFxuICAgIHRlbXBsYXRlVXJsOiAnYWRkLWNvdXJzZS5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJ2FkZC1jb3Vyc2UuY29tcG9uZW50LmNzcyddXG59KVxuXG5leHBvcnQgY2xhc3MgQWRkQ291cnNlQ29tcG9uZW50IHtcblxuICAgIHRhYkluZGV4OiBudW1iZXIgPSAxO1xuICAgIHRhYk5hbWU6IHN0cmluZyA9ICcnO1xuICAgIHRhYlByb2dyZXNzID0gW1xuICAgICAgICBuZXcgVGFiKDEsICfguYDguJ7guLTguYjguKHguIrguLHguYnguJnguYDguKPguLXguKLguJknKSxcbiAgICAgICAgbmV3IFRhYigyLCAn4LmA4Lie4Li04LmI4Lih4LiZ4Lix4LiB4LmA4Lij4Li14Lii4LiZJyksXG4gICAgICAgIG5ldyBUYWIoMywgJ+C5gOC4nuC4tOC5iOC4oeC4o+C4ueC4m+C4meC4seC4geC5gOC4o+C4teC4ouC4mScpLFxuICAgICAgICBuZXcgVGFiKDQsICfguIHguLPguKvguJnguJTguITguYjguLLguYDguKPguLTguYjguKHguJXguYnguJknKVxuICAgIF07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlciwgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlciwgcHJpdmF0ZSBjb3Vyc2VTZXJ2aWNlOiBDb3Vyc2VTZXJ2aWNlKXtcbiAgICAgICAgdGhpcy5jcmVhdGVDb3Vyc2VGb3JtKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3R1ZGVudHNGb3JtKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlWHBGb3JtKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlTGV2ZWxzRm9ybSgpO1xuICAgIH1cblxuXG4gICAgbmdPbkluaXQoKXtcbiAgICAgICAgdGhpcy50YWJOYW1lID0gdGhpcy5nZXRUYWJOYW1lKCkubmFtZTtcbiAgICB9XG5cbiAgICBuZXh0KCl7XG4gICAgICAgIHRoaXMudGFiSW5kZXggPT0gNCA/ICB0aGlzLnRhYkluZGV4ID0gNDogdGhpcy50YWJJbmRleCsrO1xuICAgICAgICB0aGlzLnRhYk5hbWUgPSB0aGlzLmdldFRhYk5hbWUoKS5uYW1lO1xuICAgIH1cblxuICAgIGdldFRhYk5hbWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiUHJvZ3Jlc3MuZmluZChpbmRleCA9PiBpbmRleC5pZCA9PSB0aGlzLnRhYkluZGV4KTtcbiAgICB9XG5cbiAgICBwcmV2aW91cygpe1xuICAgICAgICB0aGlzLnRhYkluZGV4ID09IDEgPyAgdGhpcy50YWJJbmRleCA9IDE6IHRoaXMudGFiSW5kZXgtLTtcbiAgICAgICAgdGhpcy50YWJOYW1lID0gdGhpcy5nZXRUYWJOYW1lKCkubmFtZTtcbiAgICB9XG5cbiAgICBwb3B1cE1lc3NhZ2U6IGFueSA9IHtcbiAgICAgICAgXCJ0aXRsZVwiOiBcIuC5gOC4nuC4tOC5iOC4oeC4p+C4tOC4iuC4suC5gOC4o+C4teC4ouC4muC5gOC4o+C4teC4ouC4muC4o+C5ieC4reC4olwiLFxuICAgICAgICBcIm1lc3NhZ2VcIjogXCJcIlxuICAgIH07XG5cblxuICAgIC8vLy8vLy8vLy8vLyBTdGVwIDEgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgY291cnNlRm9ybTogYW55O1xuICAgIGNyZWF0ZUNvdXJzZUZvcm0oKXtcbiAgICAgICAgdGhpcy5jb3Vyc2VGb3JtID0gdGhpcy5mb3JtQnVpbGRlci5ncm91cCh7XG4gICAgICAgICAgICAnbmFtZSc6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdXSxcbiAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8gU3RlcCAyIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHN0dWRlbnRzRm9ybTogYW55O1xuICAgIGNyZWF0ZVN0dWRlbnRzRm9ybSgpe1xuICAgICAgICB0aGlzLnN0dWRlbnRzRm9ybSA9IHRoaXMuZm9ybUJ1aWxkZXIuZ3JvdXAoe1xuICAgICAgICAgICAgJ3N0dWRlbnRfaWQnOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXV0sXG4gICAgICAgICAgICAnc3R1ZGVudF90aXRsZSc6IFsnbXInXSxcbiAgICAgICAgICAgICdzdHVkZW50X25hbWUnOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXV1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBjaGVjazogc3RyaW5nID0gJ2V4Y2VsJztcblxuICAgIG9uQ2hlY2soY2hlY2s6IHN0cmluZyl7XG4gICAgICAgIHRoaXMuY2hlY2sgPSBjaGVjaztcbiAgICB9XG5cbiAgICBzdHVkZW50czogU3R1ZGVudFtdID0gW107XG4gICAgZWRpdFN0dWRlbnRNb2RlOiBib29sZWFuID0gZmFsc2U7XG4gICAgc2VsZWN0ZWRJbmRleDogYW55O1xuICAgIGFkZFN0dWRlbnQoc3R1ZGVudDogYW55KXtcblxuICAgICAgICBsZXQgZmFrZUltYWdlID0gKHN0dWRlbnQuc3R1ZGVudF90aXRsZSA9PSAnbXInIHx8IHN0dWRlbnQuc3R1ZGVudF90aXRsZSA9PSAnYm95Jz9cbiAgICAgICAgICAgIFwiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwvOWovNEFBUVNrWkpSZ0FCQVFBQUFRQUJBQUQvMndCREFBb0hCd2dIQmdvSUNBZ0xDZ29MRGhnUURnME5EaDBWRmhFWUl4OGxKQ0lmSWlFbUt6Y3ZKaWswS1NFaU1FRXhORGs3UGo0K0pTNUVTVU04U0RjOVBqdi8yd0JEQVFvTEN3NE5EaHdRRUJ3N0tDSW9PenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3p2L3dBQVJDQUNXQUpZREFTSUFBaEVCQXhFQi84UUFId0FBQVFVQkFRRUJBUUVBQUFBQUFBQUFBQUVDQXdRRkJnY0lDUW9MLzhRQXRSQUFBZ0VEQXdJRUF3VUZCQVFBQUFGOUFRSURBQVFSQlJJaE1VRUdFMUZoQnlKeEZES0JrYUVJSTBLeHdSVlMwZkFrTTJKeWdna0tGaGNZR1JvbEppY29LU28wTlRZM09EazZRMFJGUmtkSVNVcFRWRlZXVjFoWldtTmtaV1puYUdscWMzUjFkbmQ0ZVhxRGhJV0doNGlKaXBLVGxKV1dsNWlabXFLanBLV21wNmlwcXJLenRMVzJ0N2k1dXNMRHhNWEd4OGpKeXRMVDFOWFcxOWpaMnVIaTQrVGw1dWZvNmVyeDh2UDA5ZmIzK1BuNi84UUFId0VBQXdFQkFRRUJBUUVCQVFBQUFBQUFBQUVDQXdRRkJnY0lDUW9MLzhRQXRSRUFBZ0VDQkFRREJBY0ZCQVFBQVFKM0FBRUNBeEVFQlNFeEJoSkJVUWRoY1JNaU1vRUlGRUtSb2JIQkNTTXpVdkFWWW5MUkNoWWtOT0VsOFJjWUdSb21KeWdwS2pVMk56ZzVPa05FUlVaSFNFbEtVMVJWVmxkWVdWcGpaR1ZtWjJocGFuTjBkWFozZUhsNmdvT0VoWWFIaUltS2twT1VsWmFYbUptYW9xT2twYWFucUttcXNyTzB0YmEzdUxtNndzUEV4Y2JIeU1uSzB0UFUxZGJYMk5uYTR1UGs1ZWJuNk9ucTh2UDA5ZmIzK1BuNi85b0FEQU1CQUFJUkF4RUFQd0QyYWlpaWdBb29vb0FLS0taTE5IQkdaSlhWRkhVazBBUG9yRnVmRWNTN2x0b2k1NXc3OERwd2NkVCtsWjB1dDM4aE9KUkdDUHVvb3grdlA2MDdHTXE4RWRWUzF4UnU3cGsyTmN6TXVNRU5JVG1vVitWdHk4RWR4Ull6K3Nyc2QzUlhHTGYzaXNDTHFiZzU1Y21yY0d2M3NaL2VGSlJuK0pjSEh0aWl3MWlJdmM2aWlzdTExKzFud3NvTURIKzl5djUvNDFwcXdaUXlrRUVaQkhla2J4a3BiTVdpaWlnb0tLS0tBQ2lpaWdBb29vb0FLS0t3ZFkxa2huczdOaUdIeXl5ampIK3lwOWZVOXVnNTZCTXBLS3V5enFXdHgyaDhxM0N5eThnblB5cDlmVTU3ZlhwWE96M0Uxeko1azhqU05qR1QyK2c2Q29sVUtvVlFBb0dBQjBGTFZwSG4xS3NwK2dVVm02OXJjT2c2Y2J1YU5wQ1dDUm9weHVZZ25HZXc0UE5lZDZuNDMxblVDeXh6Zlk0ajBTRGc5ZU10MXo5TWZTaTQ0VXBUMVI2c1NGR1NRQU81cEZaWEdWWU1EM0Jyd3FTV1NhUnBKWGFSMk9XWmprays1cHRLNXY4QVZmTTk0b3J5RFIvRk9wNlJjUnNMbVNlM1hBYUNSeVZLK2d6OTM4UDE2VjZ6YlhsdGV4K1phM0VVNmROMGJoZ1B5cHBtRlNrNGJrMVdyTFViaXhiOTIrVXp5amREVldpZ3pUYWQwZGhZNmpCZnA4aDJ5QVpaRDFIK0lxM1hEeFN2RElza2JGWFU1QkZkVHBtcHBmeFlPRm1VZk12cjdqMnFXanRwVnViUjdsK2lpaWtkQVVVVVVBRkZGTmQxamphUjJDb29KWm1PQUI2bWdEUDFuVWpaUUNPSmdMaVQ3dVZ6dEhjLzRaL1hCcmx5U1RrbkpOUzNkeTk1ZFNYRDVHOC9LRC9DdllkVDI2NDR6azk2aHFranpxcytlWGtGSTdyR2pPN0JWVVpaaWNBRDFwYTh1OFdlS2IzVTU1TEFSeVdsckczTVRBcTcraGIrZVA1OFUyeFU2Ym03SXY4QWkveGZhWDhVbW1XZHRIY1JnODNFZ3lBZWVVSC9BTE45ZU1jMXhORkZRZWpDQ2dySUtLS0tDd3FTQ2VhMmxFMXZNOE1pOUhqWXFSK0lxT2lnUjJPamZFSzh0bVdMVkUrMVJmOEFQUkFCSVA2SDlQclhmMk4vYTZsYXJjMmM2elJOeHVYc2ZRanNhOFBydHZoc3QzOXN1MlVqN0lZd0hHNGNQa2JlT3ZUZDdmbFRUT1d0U2lvOHkwUFFxa2dtZTNtU2FNNFpEa1ZIUlZIRnNkcFozU1h0c3N5Y1o2cm43cDlLbnJtTkN2REJkK1F4L2R6Y2ZSdTMrRmRQVXM5S2xQbmpjS0tLS1JvRlpmaUM1YURUL0xUTzZaZ2hJSUJBNm42ampINDFxVnpQaVJ5Mm94STBhYlk0c28rUG15eCtZZlQ1VnBvenF5NVlObVZSUlVGN2VRYWZaeTNkdzRTS0pTekgrZzl6MEZVZWFZZmpEeEwvQUdIWnJCYkZUZXpnN004K1d2OEFleC9MOGZURmVXTzdTT3p1eFptT1daamtrK3BxN2ZYTjdyMnBYTjZZM2tjZ3lNRkdSR2cvb0JnWi9xYW9WTFBUcFUxQ051b1VVVVVqVUtLS0tBQ2lpaWdBclEwVFdKOUUxS084ZytZRGlTTW5BZGU0L3dBOTZ6NmVrVWtpeU9rYk1zUzduS2pJVVpBeWZRWklIMUlvRTBtck05d3RyaU83dFlybUU3bzVrRG9mWWpJcVdzTHdTQ1BDTmpuL0FLYWYrakdyZHF6eVpLMG1oUVNyQmxKQkJ5Q08xZHBhVGk1dElwaGo1MXljZGozL0FGcmlxNlh3N0x2c1dqTFpNYm5BOUFlZjU1cE0zdzhyU3NhMUZGRlNkd1Z4K3JNNTFxOERkRmRRdjAyTC9YTmRoWEg2czRiV3J3ZjNIVWYrT0tmNjAwYytJK0FxVlExblNJTmJzZnNkeExOSEdYREh5V0FKeDJPUWVQOEFBVmZvcWpoVGFkMGNsNGswZE5LOEhTV1drMmhaV2RQT0lHNTJVSE80bnZ5QjlBZXdyaUxUdzFyVjZDWWRObjJnWjNPdXdFZXhiR2E5a29wV040VjNGV09Ec1BoekdmQmsvaURVTHVWWE5tOXhCQkNvR1BsSlVzVG5JUEhBQTY5YTVQU05DMVRYYmd3YVpaU1hMcjk0cmdLdlhHV1BBNkhxZWE5eDhFTXQ1NEYwd1RLSkVhMzh0bFlaQkFKWEJIcGdWYnN0VDBPMjFSdkQxazhFRjFDbm1HMWlpMkJRY0hqQTI1NUJ3T2FrOUE4ZDE3d0ZlK0d0Q1hVdFR1b2hKSktzVWNFSUw4a0VuY3h4akFVOU04L25YTEFFbkFHVFgwemZhZlo2bmJHMnZyYUs1aGJrcElvWVo5ZlkrOVZMVHczb2xoQkpEYTZYYXhKTEdZcE5zWXk2SHFwUFVqMm9DNTg0VlpzTk92ZFV1UmJXRnJMY3pFWjJSS1dJSFRKOUJ5T1RYc0srR1BoN0Q0Z2owY1drUjFIYnZFQm1tYmpHZWVTdWNET0QyNXJzYlN4dE5QaDhpeXRZYmFMT2RrTVlSYyt1QlFGejVta2praGxlS1ZHamtSaXJJd3dWSTZnanNhNlR3QktpK0ltZ2tRT3R6YnZFVkl5RDBZNUhmaGFYNGl3eHhlUGRUU0pGUUZvMklBQUdUR3BKK3BKSi9HbStEYlNlMjhYV0l1WVpJUzhiU1JpUlN1OVNqWUl6MUI5YUVSVStCbnFNY2FSUnJIR2lvaUFLcXFNQUFkQUJUcUtLczhzSzNmREo1dVIvdS8xckNyYzhORDU3Zyt5LzFwUFkxby94RWI5RkZGU2VpRmNwcnlSeDZ3NFg3OGtheU4rcWovMEd1cnJEOFN3dTBWdk9wWXFqRkdVREk1NXlUMis3ai9nVk5HTlpYZ3pBb29vcWp6d29vb29BWDRhblBnTFRoM0htZyszNzE2MGJid3hwOXQ0bXV2RUsrWTE1Y29FSVlnb2d3QmxSaklKMmp2NjFqL0Q2VVJMcldtTVNKTGJVSGtXUEhDeHlBRk1mWERHdXIrMVcvd0JyK3llZkg5bzJlWjVPOGI5bWNidHZYR2VNMUI2cWQxY2gxVFVyYlNOTXVOUXUzMncyNkYyeGpKOUFNOXljQWU1cDJuejNOenA4RTkzYkMxbmtRTThBZmY1ZWV4T0J6NjhkYXhmRzF0Znk2WlozTmhhdGR0WTMwVjFKYkl4RFNvbWNxUFU1SU9QYnYwclcwalU0OVkwNUwyTzN1TGNPV1V4WE1leDFJSkJ5UHdvR1VWOEo2WXZpdC9FcDgxcjFrMmdGaHNVN1F1NERHYzdSanJqazhWdDFUMWZWTGZSZEt1TlJ1aVJGYnB1SUhWajJBOXljRDhhcStGNXRTdWZEZGxjYXN3YThtUXlPUW9YQVlrcU1BREdGSUg0VUFjZkJMcDBYeGMxOTlTbHRVdGpaS2pmYVdVSWNyRng4M0hZMWxhQUd2WmREdFlGVjR0RFM0TnhjSTJVYVNVaytXcC9pMmdqSkdRZWNjWUpkQm85aDRoOFcrSTdqVUxReXBGZCtWR1M3S01xV0RkRHowWDg2NnUzdDRiV0ZZTGVKSVlsKzZpS0FCK0FwcEhOV3JKWGlpU2lpaXFPSUs2RHcxR1JCUEwyWmd2NUQvd0N2WFAxMTJrUWZaOU5pQkFETU41L0gvd0N0aWt6ZkRxODdsMmlpaXBPOEtyMzFxTDJ5bHQ4Z0YxK1ZpQ1FyZFFjQWpPRGc0elZpaWdOemhPUVNyRGF5a3F5NUIya2NFY2Vob3JZOFFXUGt6RytVL0pLUXNnSkp3M1FIMEFPQU8zUHFUV1BWbzh5Y09TVmdvb29vSU1iN2F2aHJ4bkJxVXAyV0dxSUxhNVl0aFVrSDNIT2VPbkhzTW11bDhSNlBlVHlRYXhvcFJOV3NnUW9iaGJtUHEwVEgwUFVaNkgwemtaV29XRnZxZGhMWlhLbG9wUmc0T0NQUWozQjVySDB2eFRxZmdsRTAzWG9KTDNURk95MnZZdVdSZXlrSDhPQ2NqQnh1R01TMGQxQ29tdVY3blM2ZjQvMEs2SWd2WnpwZDZvL2UyMTRwak1aN2pjUmo2YzU5cVcvK0lQaHF4UGxyZmk4bk9Oa05vcGxaeVRnQUVmTG4ySnFTTFV2Qi9pcG9qNW1tWDhwQldOSjBVeWdkOEs0M0Q4cTFMTFJ0SzA2UXlXT20ybHE1RzB2REFxRWoweUJTT2c1dURTTlM4WGFqRHFYaU8yK3lhWmJrUGFhV3h5WGJIMzV2L2lmd09PZDNSYTNxc09pYUxkYWxOZ3JieGxncE9OemRGWFB1U0IrTlI2cjRrMGJSRkoxSFVZSUdBQjhzdG1RZzhaQ0RrL2xYQ1hOM2RmRURVSUxpYTNrdGRDdEgzeFJTZmV1WDlTT21NZlhxUUNja2dKbEpSVjJXUEI5bExhYUJISmNNelhGMnh1Wldac2tsdWgrdUFNKythM0tLS3M4eVQ1bmNLS0tLQkZuVDdVM2w3SERqNWM1ZjJBNjEyTlp1aVdIMlMyODJSY1N5OG5JNVVkaC9uK2xhZFN6dm93NVk2OVFvb29wRzRVVVVVQU5kRmtSa2NCbFlZSVBjVnlPb2FiTHAwdTFpWkltUHlTWTYreDkvNTlmWWRoVWMwTWR4QzBNcWhrY1lJcHBtZFNtcG80aWlyMS9wTStuamVXODJFdGdPQnlQVGQvTFBUNlp4VkdxUE9sRnhkbUZJeXE2RkhVTXJEQkJHUVJTMG9CSkFBeVQwRkFqQnZQQmVnM2hkalpDRjIvaWhZcGo2TDkzOUt6L0NQdzMwZlgvREZycWwxYzN5VFRiOXl4T2dYaDJVWUJVbnQ2MDNXTlExalZZTGVUU3JrV1ZsZDN5Mk50SjBhNGNrZ3VEMlFFWXlPVHo5QjZWb21rVzJnNlJCcGxwdU1VQUlETWNsaVRray9VazFMUFFveG1sN3pQTS9CZWhhUGM2SmIzOGxwRlBkWmRaQzUzZ0VNY2ZLVGdIR08xZGpYQm53ZStuZUlOV3NvYncyRnhaVzczMXBjcElTclFBNDJ5ZE1IcHlCMmJoZ1JYWDZGUGQzM2gyeDFDN2hNYnp4NUpJeHV3U00vampQNDAwekN2VGtuelh1WGFLS0taekJXem91bGVjeTNVNi91MU9VVS94SDErbE8wdlEyWmhOZUxoUnlzWjZuNi80VnZnQUFBREFIUUNrMmRWR2o5cVF0RkZGU2RnVVVVVUFGRkZGQUJSUlJRQVZqM3ZoK0dWUzFwdGdjRGhNZkllRHg3ZHVuNVZzVVVFeWlwS3pPT3VkT3U3UW56WVcyakozcU1yZ2Q4OXZ4cUdUVDU3M1JkU0Z1cE03V3NrY0FCeG1Rb1FPZTNVZm5YYjFDMXRHek0yTUZ1dVBYMXAzTVkwRkdWenpTeXRyWHh2NEFzOVBzTHcyZW82VUk4QS9LME15THRHY2NnSGtnaitZSXJIbjhiK09MVWFoWXJiMlYwK21MaTZ1NEl5KzNuRzRrSGJucnhqakJ5T0RqdGRlK0dtaGF0ZXRxTHRjMnR3K2ZNTnE0UVNFOVNRUWYweG5QTmF0aG8ybTZacHgwNnpzNG9yVWdob3NaRDU0TzdQM3Nqam1rZEI1NWEyYmFsSGFhZkJxTFgyb2VJMVc2MVM5UTQ4cTJYZ291QmhlY3A5UmdnREFIcGFXc0Vkb2xxa1NyQWlCRmpBd0ZVREFBK2xZL2hyd1pwM2htZTlsc0ZkMnVYeU4vSmpUc2dQcG5QMTR6bkdhNmVHRGI4empuc1BTZ0hxYzlEb2wxUEtjS1lvdHh3MG5CeG4wNi93QXEyckhTYmF5dzRIbVNqK051MzBIYXI5Rk81bENsR09vVVVVVWpVS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FRZ0VZSXlLait6eGYzZjFvb29BZWtheGpDakdhZFJSUUFVVVVVQUZGRkZBQlJSUlFBVVVVVUFmLzlrPVwiIDpcbiAgICAgICAgICAgIFwiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwvOWovNEFBUVNrWkpSZ0FCQVFBQUFRQUJBQUQvMndCREFBb0hCd2dIQmdvSUNBZ0xDZ29MRGhnUURnME5EaDBWRmhFWUl4OGxKQ0lmSWlFbUt6Y3ZKaWswS1NFaU1FRXhORGs3UGo0K0pTNUVTVU04U0RjOVBqdi8yd0JEQVFvTEN3NE5EaHdRRUJ3N0tDSW9PenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3p2L3dBQVJDQUNXQUpZREFTSUFBaEVCQXhFQi84UUFId0FBQVFVQkFRRUJBUUVBQUFBQUFBQUFBQUVDQXdRRkJnY0lDUW9MLzhRQXRSQUFBZ0VEQXdJRUF3VUZCQVFBQUFGOUFRSURBQVFSQlJJaE1VRUdFMUZoQnlKeEZES0JrYUVJSTBLeHdSVlMwZkFrTTJKeWdna0tGaGNZR1JvbEppY29LU28wTlRZM09EazZRMFJGUmtkSVNVcFRWRlZXVjFoWldtTmtaV1puYUdscWMzUjFkbmQ0ZVhxRGhJV0doNGlKaXBLVGxKV1dsNWlabXFLanBLV21wNmlwcXJLenRMVzJ0N2k1dXNMRHhNWEd4OGpKeXRMVDFOWFcxOWpaMnVIaTQrVGw1dWZvNmVyeDh2UDA5ZmIzK1BuNi84UUFId0VBQXdFQkFRRUJBUUVCQVFBQUFBQUFBQUVDQXdRRkJnY0lDUW9MLzhRQXRSRUFBZ0VDQkFRREJBY0ZCQVFBQVFKM0FBRUNBeEVFQlNFeEJoSkJVUWRoY1JNaU1vRUlGRUtSb2JIQkNTTXpVdkFWWW5MUkNoWWtOT0VsOFJjWUdSb21KeWdwS2pVMk56ZzVPa05FUlVaSFNFbEtVMVJWVmxkWVdWcGpaR1ZtWjJocGFuTjBkWFozZUhsNmdvT0VoWWFIaUltS2twT1VsWmFYbUptYW9xT2twYWFucUttcXNyTzB0YmEzdUxtNndzUEV4Y2JIeU1uSzB0UFUxZGJYMk5uYTR1UGs1ZWJuNk9ucTh2UDA5ZmIzK1BuNi85b0FEQU1CQUFJUkF4RUFQd0QyYWlpaWdBb29vb0FLS0tqbG1qZ2pNa3JxaWp1VFFHNUpSV0pjK0pJVXl0dEVaRC9lYmdmbDFQNlZtemE1ZnpFNGxFWUk2SXVQMTYwcm82WVlXcEx5T3RwSzRoN3U1a0dIdUpXSG96azFIdWIrOGZ6cGN4c3NFLzVqdktLNGxiNjdURzI2bUdPZzNuRlhJZkVGOUdmblpKUi90TGorVkZ5SllPYTJaMVZGWlZyNGd0WnlGbUJnWS8zdVYvT3RSV1YxREtReWtaQkJ5RFZITk9Fb08wa0xSUlJRUUZGRkZBQlJSUlFBVVVVVUFGRkZZbXM2eDVPNjF0Vy9lZEhjZncrdzkvNWZ5QzZkT1ZTVmtUNmxyY1ZubUtIRXMzUWpQQy9YL0N1YnVMbWE2azh5ZVF1M3YwSDBGUlVWRGR6MTZWR05OYWJoUlJSU05nb3ByT2lETHNGSHVjVld2ZFRzZE9pV1c4dVVoUjJDZ2s5U2VuOHFCTnBibHVpb0xhOXRMMVMxcGN3enF2Qk1UaHNmbFU5QTA3aFZxeTFHNHNYekUrVTdvM0ttcXRGQXBSVWxablkyR3B3YWdueUhiSUJsb3oxSCtJcTVYQ1JTdkRLc2tURlhVNUJGZFhwZXFKcUVXR3dzeWo1bDlmY2UxV21lWFh3L0o3MGRqUW9vb3BuSUZGRkZBQlJSVFhkWTBaM1lLcWpKSk9BQlFCUTFqVWZzTnR0akk4K1RoZU00SGMxeVpKSnlUa21yRjlkdGUzanpuSUJPRkI3RHQvbjFxdlVOM1Bab1V2Wnc4d29vcmx2RnZpMGFPRFpXUlZyMWg4ekhrUWc5eVBYMEg0L1ZHazVxQ3V6UTF6eFBwK2hJVmxmemJnajVZRVB6ZTJmN28veUFhNExWUEd1c2FpN0NLYzJjT2VFZ09EMTR5M1hQMHdQYXNHU1I1Wkdra2RuZHpsbVk1SlBxVFRhdEk4eXBpSnoyMFFyTXpzV1ppekU1Skp5VFNVVVV6bkh4VFMyOHF5d3lQSElweXJveEJIMElyck5GOGZYbG9WaDFNRzZoSEhtS0FKRi9vMzQ4KzljaFJRWENwS0R2Rm50MWxmV3VvMnkzTm5PczBUZnhLZWg5Q094OWpWaXZHdEYxdTgwTzc4KzFiS3R4SkUzM1hIdjcraHIxZlI5V3R0YTA5THUyUEI0ZEQxUnU0TlExWTlPalhWVFRxWHFrZ25rdHAwbWlPSFE1RlIwVWpkcTZzenRiSzdTOXRVblRqUFZjL2RQY1ZZcmw5QXZUQmVlUXpmdTV1T1QwYnQvaCtWZFJWcG5qVnFmczUyQ2lpaW1ZaFdacjl6NUduRkZPR21PM2c0T09wL3cvR3RPdWE4U3lzMTVGRnh0U1BjUFhKUFA4aFNleHZoNDgxUkl4NktLS2c5a3h2Rkd1cG9XbG1WY0c1bHlrQ2s5LzczMEgrQTcxNUpKSThzalN5T1hkeVdabU9TU2VwTmRCNDR2MnZQRWswZThOSGJBUklBZU00eTM0NUpINEN1ZHEwanljUlVjNTI2SUtLS0taemhSUlJRQVVWdGVIdkQ3NjdEcXBUZnVzckpwMDJqT1dERDVmZks3c2UrS3hhQUN0bnd6cmo2SHF5U2xtK3pTa0pPdWVDUDcyUFVkZnpIZXNhaWdjWk9MdWozVUVNQVFRUWVRUjNwYXdQQlYrYi93MUJ1SkwyNU1MRWpIVHAvNDZWcmZyTTl1TXVhS1lxc1ZZTXBJSU9RUjJydHJTY1hOcEZNTWZPb0p4MlBjZm5YRVYwL2gyVXZwNWpKejVia0FlZ1BQODgxVVRreGtid1V1eHJVVVVWUjVnVnlHdDd2N1l1Tnh5TXJ0OWh0SC9BTmV1dnJrTmFZTnJOeUFlVktnLzk4Zy8xcFBZNjhIL0FCUGtVYUtLS2c5VThoOFdXaHMvRTE2bk9KSlBOQkk2N3ZtUDZrajhLcGFkcGQ5cTkxOWwwKzFrdVpzYnRrYTV3T21UNkRrY211MCtJK21ob0xiVTBIeklmSms2OURrcjlNSFAvZlFwdndlLzVHeTYvd0N2Ri84QTBaSFZvOGF2SGxxTkZHMStGM2lxNGsyeVdjVnN1UHZ5em9SLzQ2U2YwclFpK0QydXRJb2x2dFBSQ2ZtS3U3RWZodEdmenIyT2ltWTNQS3o4R0pzY2E2bWYrdlkvL0ZWQmNmQnJVRmh6YmF2YlNTNSs3Skd5TCtZei9Ldlc2S0JISC9EcndwYytHdEt1VGZvcVhsMUw4NnErNEJGeUY2Y2QyUDBJcnlueGQ0Y3VQRGV1ejI3d01sckk3TmF2a2tOSG5nWjlRQ0FmL3Jpdm9VRUhwVlhVdExzZFlzMnROUXRZN2lGdWRyam9lbVFlb1BKNUhOQUh6UlJYVmVHUERHbStJTk1kWmI2NHROU2xuTVZxV2lKdDNJUU50TFk0WTg5L1RnOUs1aVdHU0NWb3BrYU4wSlZsWVlJSU9DUHpGQXp2dmhyTXpXVjlDVDhxU0t3SHVRUWYvUVJYYTF4L3c0Z0NhUmRYSE9aSjl2NEJSLzhBRkd1d3FIdWV6aC80U0N0N3d3ZitQa2Y3djlhd2EzZkRIVzUvNEQvV2hiazRuK0V6b0tLS0tzOGNLNVBYNDQ0OVlrMm41NUVXUmg2ZFZIL29OZFpXRjRuaFl4Mjg0UHlxeFJnRnoxNUJ6MkF3ZnpwUFk2TU5MbHFvNStpaWlvUFlNSHh0ai9oRXIzL3RuLzZHdGNwOE1KNUlmSFZtaU1Rc3lTbzRIY2JDMlB6VWZsV3g4UjdzUjZWYTJnTEJwNVMvSFFxbzVCL0ZoK1ZjaDRXMUlhUjRvMDYrWnhISEhPb2tZOWtQeXNmKytTYXRiSGw0dDNxV1BkdkZHa3o2NzRjdk5NdDV4QkxPb0N1MmNjTURnNDdIR1B4cXhwMXJIb21oMjFyTmNneDJWdXFQUEo4b3dxOHNjbmdjZXZGWHFyYWpaUjZscHR6WXpGaEhjeE5FeFhxQXd4a2UvTk00eHVuYXBZYXRiL2FOUHU0cm1JSEJhTnM0UG9mUS9XbjZoYnlYbW5YTnJETzF2Sk5DOGFUTDFqSkJBWWNqa2RldGM3NFY4STIrbWZaZFRudFhzOVRXMzhpNGppbnpISVI4dThnY0VrQUgweWNrWjVycXFBTVR3ajRmZncxNGZoMDZTNDgrVUV2SXcrNkdQVUw3RDlldkdjVnQxU2oxYXptMWlYU29uWjdtQ01TVEJWTzJNSEcwRTlBVG5JSG9EVTk1ZFIyVmxQZHkvd0NyZ2phUnNlaWpKL2xRQjR4NFk4UjZGcFBoZFk5UlNlNHZMYlUvdGtGdkVOb1poR0FoWnVnWE9lblBIUWpnOGplM2N0L2ZYRjVQanpiaVZwWDJqQXl4Sk9QeE5RVVVEUFgvQUFwYmZaZkRGaEh1M2Jvdk16ais4UzJQd3ppdGVzL1FGMitIdE9HYy93Q2l4bi94MFZvVm1lNUQ0RUZkRjRaaXhiVHk1Kzg0WDhoLzlldWRyc05JZyt6NlpDdkdXWGVlTWRlZi9yZmhUUno0dVZxZHU1ZG9vb3F6eWdxdHFGb0w2d210c2hTNi9LeHpoV0hLa2dFWkFJSEdlZWxXYUtCcDJkMGNDTThobEtzQ1F5bkdWSTZnNDdnMHRhL2lLeCt6M0gyNWMrWE93V1Q3eDJ2akFQb0FRQU93ejZscXlLaG50MHFpcVJVamd2aVh1OHpUaVQ4dUpNRDMrWFA5SzRhdlh2RXVncHIrbStTR1dPNGpPNkdRam9mUTk4SC9BQVBPTVY1VGUyRjNwMXdiZThnZUdRZG5IVWRNZzl4N2lxUjUrS2cxTnk2TTl3K0gzaVZmRVBoNk5KWkMxN1pnUlQ3amt0L2RmcVNjZ2NuMUJvMVh4ZlA0ZDhRU1E2MVpNbWtTaFBzMTlDak50Ykh6Q1Q4YzR4emdkRG5JOFgwVFdyN1FOVGoxRFQ1ZGtxY0ZUeXNpOTFZZHdmOEFBakJBTmUyK0d2SEdqK0o0MWlTUVc5NFJocldZamNUakoybitJY0hwenh5QlRPUXMyL2pUd3pjd2lXUFc3TUtlMGtnUnZ5YkJxSzQ4YTZRV050cGMzOXEzN2o5emJXdVczbk9PWHh0VWM1Sko0R2F2UDRhMENSeTc2SHB6TXh5V2EwUWsvcFZ5MHNiUFQ0dkpzcldHMmp6blpER0VHZm9LQkdkNGUwV1RTb3JpNHZKVm4xRy9rODY3bFVIYm5zaTU1MktPQm45TTRGTDRnNm91bCtETDVpVjMzS2Zab3dmNGkvQi84ZDNIOEszcnk4dHRQdFpMcThuamdnakdYa2tiQUZlSWVQdkY0OFVhb2lXcGRkUHRjaUlNTUdSajFjajlBRDI5TWtVQWNuUlJSUVVlcWVCcjAzbmhtSldMRnJaMmhKYnZqa1krZ1lEOEs2S3VWK0hsdEpENGZlVndRczg3TW5QVUFBWi9NSDhxNnFvWjdORnQwMWN0YWJhL2JMNk9FaktaM1A4QVFmNXgrTmRuV1hvZGg5a3RQTmtYRXN2SkJHQ283RC9QOUsxS3BJODNFMU9lZW15Q2lpaW1jd1VVVVVBTWxpU2FKNHBGM0k0S3NQVVZ4MTlwayttU0NPUnpORzMrcm1Jd1dIbzJPQTMwNFBVWTZEdEtqdUlJcnFCNEpsM1J1TUVkUC8xVW1ybTFHczZVcjlEaHFpdUxhQzZpOHE1Z2ptakp6c2tVTVB5Tlg3L1M3alN4dWxmellDKzFKZ09jSHB1SFk5czlDY2RNZ1ZWcUQxNFRqTlhSUmkwVFNZWlZsaTAyMFNSU0dWbGhVRlQ2amppcy9WL0IyazZzN1RHTTIxd3h5WkllTng5eDBQSit2dlc5U2dGamdmcWNZb0J3ZzFaclE1R1MxOFkrSHJPYWF3OFNtYTNoaUxzdHd1NGdLTTRVTUdBNDl4VHJqVS9pQmIrRkI0a1BpQ3plektJKzFJVTMvTXdYR0RIaklKNTU3VnFtM3VOVDArMXY3aWFXT0hVcmxJTEcwUVlWME83THpIN3hCVU0yMVN2QUF6azVGRlBtK0FoQkRjQTlQK3ZtclI1RlgyZC9jTWZXdkRsOXExeWlmOEpPbW8zYTdpME56TGdxZXAycUNjZHVNRHBXSVBBL2lFdGo3RW9IcjV5ZjQxMlBoSFRkTjhVMkYxb210YVRhUVhsdkZITkRkMnNTeE84YnJsV0pVWXlBVlBQWEl5TWcxYjhNWEY4OGQvcHVvTVpyblNwL0prbHdmbVU1MnNTZXVkcDU5TWR6UTdvMXBxbFVsWnF4eUNmRHJXR0NsN2l6UUhxTjdFai9BTWRyYTA3NGRXTnZLSkw2NWU3QTZScXZscitQSkovTVYyRklTQUNTY0FkNm03TzJPR3B4MXNJaUpGR3NjYUtpSUFGVlJnQURvQUsyOUYwZ3pNbDNjWkVhbktKL2VQcWZiK2YwNnUwclEzZHhQZXB0UUFGWXoxWSsvb1BiL0o2SHB3S2FSejRqRUszSkFXaWlpcVBQQ2lpaWdBb29vb0FLS0tLQUU2akZZVjk0WmoyRnROS1FNb09JRy8xWjRPQUNPVTVJNlpBQTRXdDZpZ3FFNVFkNHM0ZTd0Yml3TEc2Z2VKRkJQbWtaVEFJR1N3NEdjakFPRDdVNmJUM3V2REdxaUZQTnVKN1NhS0pSMUpLRUFmVWsxMjFWalp4aDNlTUtoZHR6WVhHVDZuMzRwV09pZUpsT0hLenpDeXU1UEUvZ2ZTRjBLZUVheG9yeFNmWkhmRFA1YTdNSGtjTUNEbnAyejFxYTU4ZlhFVnIvQUdWZitETDBYVXl0RXRvQis3bVVENXRwMjhqR2VnSXgzcnFkUitIZmh2VkwxN3U3MHlKcHBEbDNSM2ozSHFTUXBBSjU2OWF1NlA0UDBYUWR4MHl5aWdadUdmQlp5T09OekVuSEE0emltY3B5WGc3eE5vYzhGMXF0NXFkamFYdDJ5ckpidEo1UWhSQmhFVU1mbXdNbkk3dGp0V3A0WnRXdXI3V05la2paSXRXbFFReHVDTjBNYTdGY2c0STNjbkI3WXJvbThPYU85Nzl0ZlRyVnJyY0c4OHdJWHo2N3NaelY5WUkxL2h6OWFBT1ZnMGE4dVpTRWlNY1FZamZNQ3ZBT0R4MTZaSTR3Zld0elR0RXQ3RXBLNU0xd28vMWhHQURnWnd2YnA3a1pQTmFJR0JpbHBXTjZsZWMxWnZRS0tLS1pnRkZGRkFCUlJSUUFVVVVVQUZGRkZBQlJSUlFBVVVVVUFGRkZGQUJSUlJRQVVVVVVBRkZGRkFCUlJSUUFVVVVVQWYvWlwiKTtcbiAgICAgICAgbGV0IG5ld1N0dWRlbnQ6IFN0dWRlbnQgPSBuZXcgU3R1ZGVudChzdHVkZW50LnN0dWRlbnRfaWQsIHN0dWRlbnQuc3R1ZGVudF90aXRsZSwgc3R1ZGVudC5zdHVkZW50X25hbWUsIGZha2VJbWFnZSk7XG4gICAgICAgIHRoaXMuc3R1ZGVudHMucHVzaChuZXdTdHVkZW50KTtcbiAgICAgICAgdGhpcy5jcmVhdGVTdHVkZW50c0Zvcm0oKTtcbiAgICB9XG5cbiAgICBlZGl0U3R1ZGVudChpbmRleDogYW55KXtcbiAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xuICAgICAgdGhpcy5lZGl0U3R1ZGVudE1vZGUgPSAhdGhpcy5lZGl0U3R1ZGVudE1vZGU7XG4gICAgfVxuXG4gICAgZGVsZXRlU3R1ZGVudChzdHVkZW50OiBhbnkpe1xuICAgICAgICBfLnJlbW92ZSh0aGlzLnN0dWRlbnRzLCBzdHVkZW50KVxuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8gU3RlcCAzIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGltYWdlOiBzdHJpbmcgPSAnJztcbiAgICByZXNpemVPcHRpb25zOiBSZXNpemVPcHRpb25zID0ge1xuICAgICAgICByZXNpemVNYXhIZWlnaHQ6IDE1MCxcbiAgICAgICAgcmVzaXplTWF4V2lkdGg6IDE1MFxuICAgIH07XG5cbiAgICBzZWxlY3RlZChpbWFnZVJlc3VsdDogSW1hZ2VSZXN1bHQsIHN0dWRlbnQ6IGFueSkge1xuXG4gICAgICAgIHRoaXMuc3R1ZGVudHNbdGhpcy5zdHVkZW50cy5pbmRleE9mKHN0dWRlbnQpXS5pbWFnZSA9IGltYWdlUmVzdWx0LnJlc2l6ZWRcbiAgICAgICAgICAgICYmIGltYWdlUmVzdWx0LnJlc2l6ZWQuZGF0YVVSTFxuICAgICAgICAgICAgfHwgaW1hZ2VSZXN1bHQuZGF0YVVSTDtcbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8gU3RlcCA0IC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHhwRm9ybTogYW55O1xuICAgIGNyZWF0ZVhwRm9ybSgpe1xuICAgICAgICB0aGlzLnhwRm9ybSA9IHRoaXMuZm9ybUJ1aWxkZXIuZ3JvdXAoe1xuICAgICAgICAgICAgJ3N0YXJ0X3hwJzogICBbJzEnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF1dLFxuICAgICAgICAgICAgJ2xlYWRlcl9ib2FyZCc6IFsnMTAnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF1dXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldmVsc0Zvcm06IGFueTtcbiAgICBjcmVhdGVMZXZlbHNGb3JtKCl7XG4gICAgICAgIHRoaXMubGV2ZWxzRm9ybSA9IHRoaXMuZm9ybUJ1aWxkZXIuZ3JvdXAoe1xuICAgICAgICAgICAgJ2Zsb29yX3hwJzogICBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXV0sXG4gICAgICAgICAgICAnY2VpbGluZ194cCc6ICAgICBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXV1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV2ZWxzOiBMZXZlbFtdID0gW107XG5cbiAgICBjdXJyZW50X2xldmVsOiBudW1iZXIgPSAwO1xuICAgIGN1cnJlbnRfbGV2ZWxFbmQ6IG51bWJlciA9IDA7XG5cbiAgICBhZGRMZXZlbChsZXZlbDogYW55KXtcblxuICAgICAgICBpZihsZXZlbC5jZWlsaW5nX3hwID4gbGV2ZWwuZmxvb3JfeHApe1xuXG5cbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudF9sZXZlbCA9PSAwKXtcbiAgICAgICAgICAgICAgICB0aGlzLm5ld0xldmVsKGxldmVsKTtcbiAgICAgICAgICAgIH1lbHNlIHtcblxuICAgICAgICAgICAgICAgIGlmKGxldmVsLmZsb29yX3hwID4gdGhpcy5jdXJyZW50X2xldmVsRW5kKXtcblxuICAgICAgICAgICAgICAgICAgICBsZXZlbC5mbG9vcl94cCA9ICgrdGhpcy5jdXJyZW50X2xldmVsRW5kICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGV2ZWwobGV2ZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5ld0xldmVsKGxldmVsOiBhbnkpe1xuICAgICAgICB2YXIgbmV3TGV2ZWwgPSBuZXcgTGV2ZWwoKyt0aGlzLmN1cnJlbnRfbGV2ZWwsIGxldmVsLmZsb29yX3hwLCBsZXZlbC5jZWlsaW5nX3hwKTtcbiAgICAgICAgdGhpcy5sZXZlbHMucHVzaChuZXdMZXZlbCk7XG4gICAgICAgIHRoaXMuY3VycmVudF9sZXZlbEVuZCA9IGxldmVsLmNlaWxpbmdfeHA7XG4gICAgfVxuXG4gICAgZGVsZXRlTGV2ZWwobGV2ZWw6IGFueSl7XG4gICAgICAgIC8vIHRoaXMuY3VycmVudF9sZXZlbEVuZCA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudF9sZXZlbCAtPSAxO1xuICAgICAgICB0aGlzLmN1cnJlbnRfbGV2ZWxFbmQgPSBsZXZlbC5mbG9vcl94cCAtIDE7XG4gICAgICAgIF8ucmVtb3ZlKHRoaXMubGV2ZWxzLCBsZXZlbClcbiAgICB9XG5cblxuICAgIC8vU3VibWl0IEFsbCBGb3JtXG4gICAgc3VibWl0KCl7XG5cbiAgICAgIGlmKHRoaXMubGV2ZWxzLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgbGV0IGxldmVsID0gbmV3IExldmVsKCcxJywnMScsMTApO1xuICAgICAgICB0aGlzLmxldmVscy5wdXNoKGxldmVsKVxuICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHN0dWRlbnRMZXZlbDogYW55O1xuXG4gICAgICAgIHRoaXMubGV2ZWxzLmZvckVhY2goKGxldmVsKSA9PiB7XG4gICAgICAgICAgICBpZihfLmluUmFuZ2UodGhpcy54cEZvcm0udmFsdWUuc3RhcnRfeHAsIGxldmVsLmZsb29yX3hwLCBsZXZlbC5jZWlsaW5nX3hwKSApe1xuICAgICAgICAgICAgICAgIHN0dWRlbnRMZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQpID0+IHtcbiAgICAgICAgICAgIHN0dWRlbnQubGV2ZWwgPSBzdHVkZW50TGV2ZWwubGV2ZWxfaWQ7XG4gICAgICAgICAgICBzdHVkZW50Lm92ZXJhbGxfeHAgPSB0aGlzLnhwRm9ybS52YWx1ZS5zdGFydF94cDtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBsZXQgbmV3Q291cnNlID0gbmV3IEFkZENvdXJzZShcbiAgICAgICAgICAgICAgICB0aGlzLmNvdXJzZUZvcm0udmFsdWUubmFtZSxcbiAgICAgICAgICAgICAgICB0aGlzLmNvdXJzZUZvcm0udmFsdWUuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdGhpcy54cEZvcm0udmFsdWUuc3RhcnRfeHAsXG4gICAgICAgICAgICAgICAgdGhpcy54cEZvcm0udmFsdWUubGVhZGVyX2JvYXJkLFxuICAgICAgICAgICAgICAgIHRoaXMubGV2ZWxzLFxuICAgICAgICAgICAgICAgIHRoaXMuc3R1ZGVudHNcbiAgICAgICAgKTtcblxuXG4gICAgICAgIHRoaXMuY291cnNlU2VydmljZS5jcmVhdGVOZXdDb3Vyc2UobmV3Q291cnNlKVxuICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAoZGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3RlYWNoJ10pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgY2FuY2VsKCl7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB9XG5cblxufVxuIl19
